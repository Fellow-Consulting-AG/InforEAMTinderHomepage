"undefined"==typeof infor&&(infor={}),void 0===infor.companyon&&(infor.companyon={}),infor.companyon.client={},infor.companyon.client.listeningMessageTypes={},infor.companyon.client.drillbackSelector="a.companyon-drillbacklink",infor.companyon.client.favoritesSelector="a.companyon-favoritelink";var lastY,lastMsg,MsgType={ContextDimensionChanged:"contextDimensionChanged"};function inforCompanyOnPrepareFavorites(n){infor.companyon.client.sendPrepareFavoritesMessage(n)}infor.companyon.client.messageReceiver=function(n){infor.companyon.client.executeMessage(n.data)},infor.companyon.client.executeMessage=function(n){if(null!=n){try{n=$.parseJSON(n)}catch(n){return}var i=n.type,a=n.data;if(null!=i){var e=infor.companyon.client.listeningMessageTypes[i]||[],o=infor.companyon.client.listeningMessageTypes["*"]||[],t={};$.extend(t,e,o),$.each(t,function(n,e){var o=e.handler;try{o(a,i)}catch(n){}}),t={}}}},infor.companyon.client.sendRelayMessage=function(n,e){var o={type:n,data:e};infor.companyon.client.sendMessage("prepareRelayProxyMessage",o)},infor.companyon.client.sendMessageToParent=function(n,e){var o={type:n,data:e};JSON.stringify(o);if(null!=window.postMessage){var i={type:"workspaceProxyMessage",data:o},a=JSON.stringify(i);window.parent!=window&&window.parent.postMessage(a,"*")}},infor.companyon.client.getMobileOperatingSystem=function(){var n=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(n)?"Windows Phone":/android/i.test(n)?"Android":/iPad|iPhone|iPod/.test(n)&&!window.MSStream?"iOS":"unknown"},infor.companyon.client.sendMessage=function(n,e,o){var i={type:n,data:e},a=JSON.stringify(i);try{var t=infor.companyon.client.getMobileOperatingSystem();"iOS"==t&&webkit.messageHandlers&&webkit.messageHandlers.callbackHandler.postMessage(a),"Android"==t&&InforGoAndroid&&InforGoAndroid.getLoadedPageInfo(a)}catch(n){}if(!0===infor.companyon.containerWindow)null!=window.postMessage?window.postMessage(a,"*"):"function"==typeof infor.companyon.messageReceiver&&infor.companyon.messageReceiver({data:a});else{if(null!=window.opener){try{window.opener.infor.companyon.client.sendMessageProxy(a),window.opener.focus(),window.opener.document.focus()}catch(n){}return}if(3==arguments.length){var r=JSON.stringify(i);o.postMessage(r,"*")}else if(null!=window.postMessage){var s={type:"workspaceProxyMessage",data:i};r=JSON.stringify(s);window.top!=window&&window.top.postMessage(r,"*")}else{!function n(){var e=window.parent.frames.inforCommFrame;null!=e?e.sendMessage(a,infor.companyon.client.sharePointUrl):setTimeout(n,100)}()}}},infor.companyon.client.sendMessageProxy=function(n){var e=$.evalJSON(n);infor.companyon.client.sendMessage(e.type,e.data)},infor.companyon.client.sendPrepareDrillbackMessage=function(n){var e={link:n};infor.companyon.client.sendMessage("prepareApplicationDrillback",e),infor.companyon.client.sendMessage("syndication.complete",{})},infor.companyon.client.adjustHeight=function(n){infor.companyon.client.sendMessage(window.name,{height:n+"px"}),infor.companyon.client.sendMessage(MsgType.ContextDimensionChanged,{height:n,iframeName:window.name})},infor.companyon.client.sendPrepareFavoritesMessage=function(n){var e={link:n};infor.companyon.client.sendMessage("prepareFavoriteContext",e)},infor.companyon.client.getValueQuerystring=function(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+n+"=([^&#]*)").exec(window.location.href),o=null;return null!=e&&(o=e[1]),o},infor.companyon.client.registerMessageHandler=function(n,e,o){if(null!=n&&null!=e){var i=infor.companyon.client.listeningMessageTypes[n]||[];i.push({handler:e,namespace:o}),infor.companyon.client.listeningMessageTypes[n]=i,4==arguments.length?infor.companyon.client.sendMessageToParent("workspaceClientSubscribe",{messageType:n,iframeName:window.name}):infor.companyon.client.sendMessage("workspaceClientSubscribe",{messageType:n,iframeName:window.name})}},infor.companyon.client.unRegisterMessageHandler=function(n,o){if(null!=n){var e=infor.companyon.client.listeningMessageTypes[n]||[],i=[];$.each(e,function(n,e){e.namespace!=o&&i.push(e)}),infor.companyon.client.listeningMessageTypes[n]=i}},infor.companyon.client.bind=infor.companyon.client.registerMessageHandler,infor.companyon.client.unbind=infor.companyon.client.unRegisterMessageHandler,infor.companyon.client.getEnvironmentInformation=function(e){var n=infor.companyon.client.getRandomNumber(),o={};o.MessageId=n,infor.companyon.client.unRegisterMessageHandler("processEnvironmentInformation_"+n),infor.companyon.client.registerMessageHandler("processEnvironmentInformation_"+n,function(n){e(n)}),infor.companyon.client.sendMessage("getEnvironmentInformation",o)},infor.companyon.client.getEntityInformation=function(n,e){var o=infor.companyon.client.getRandomNumber();n.MessageId=o,infor.companyon.client.unRegisterMessageHandler("processEntityInformation_"+o),infor.companyon.client.registerMessageHandler("processEntityInformation_"+o,function(n){e(n)}),infor.companyon.client.sendMessage("getEntityInformation",n)},infor.companyon.client.getRandomNumber=function(){return""+(new Date).getTime()+Math.floor(1e4*Math.random())},infor.companyon.client.getInforMingleHomeUrl=function(e){var n=infor.companyon.client.getRandomNumber(),o={};o.MessageId=n,infor.companyon.client.unRegisterMessageHandler("processInforMingleHomeUrl_"+n),infor.companyon.client.registerMessageHandler("processInforMingleHomeUrl_"+n,function(n){e(n)}),infor.companyon.client.sendMessage("getInforMingleHomeUrl",o)},infor.companyon.client.relayMessage=function(n){infor.companyon.client.executeMessage(JSON.stringify(n));for(var e=$("iframe"),o=0;o<e.length;o++){var i=$('iframe[name="'+$(e[o]).attr("name")+'"]');infor.companyon.client.sendMessage("relayFrameMessage",n,i.get(0).contentWindow)}},$(function(){null==infor.companyon.iframeId&&(null!=window.postMessage&&(window.attachEvent?window.attachEvent("onmessage",infor.companyon.client.messageReceiver):window.addEventListener&&window.addEventListener("message",infor.companyon.client.messageReceiver,!1)),void 0===$("body").live?($("body").on({click:function(){event.preventDefault();$(this).attr("href")}},infor.companyon.client.drillbackSelector),$("body").on({click:function(){event.preventDefault();$(this).attr("href")}},infor.companyon.client.favoritesSelector)):"function"==typeof $(infor.companyon.client.drillbackSelector).live&&($(infor.companyon.client.drillbackSelector).live("click",function(n){n.preventDefault();var e=$(this).attr("href");return infor.companyon.client.sendPrepareDrillbackMessage(e),!1}),$(infor.companyon.client.favoritesSelector).live("click",function(n){n.preventDefault();var e=$(this).attr("href");return infor.companyon.client.sendPrepareFavoritesMessage(e),!1})),null==window.opener&&infor.companyon.client.sendMessage("initClient",window.name),infor.companyon.client.registerMessageHandler("relayFrameMessage",infor.companyon.client.relayMessage))}),infor.companyon.client.sendMobileMessage=function(n,e){var o;try{o=$.parseJSON(e)}catch(n){o=e}infor.companyon.client.listeningMessageTypes[n][0].handler(o)};var msg,mosName=infor.companyon.client.getMobileOperatingSystem();$(window).on("touchstart",function(n){lastY=n.originalEvent.touches?n.originalEvent.touches[0].pageY:n.pageY}),$(window).on("touchmove",function(n){try{var e=n.originalEvent.touches?n.originalEvent.touches[0].pageY:n.pageY;if(Math.abs(e-lastY)<15)return;if(lastY<e){if(lastMsg!=(msg={type:"scrolledDown",data:{}}).type){lastMsg=msg.type;var o=JSON.stringify(msg);"iOS"==mosName&&webkit.messageHandlers?webkit.messageHandlers.callbackHandler.postMessage(o):"Android"==mosName&&InforGoAndroid&&InforGoAndroid.getLoadedPageInfo(o)}}else if(lastMsg!=(msg={type:"scrolledUp",data:{}}).type){lastMsg=msg.type;var i=JSON.stringify(msg);"iOS"==mosName&&webkit.messageHandlers?webkit.messageHandlers.callbackHandler.postMessage(i):"Android"==mosName&&InforGoAndroid&&InforGoAndroid.getLoadedPageInfo(i)}}catch(n){console.log("From Companyon error occured is "+n)}});